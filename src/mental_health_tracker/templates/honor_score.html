{% extends 'base.html' %}

{% block title %}Honor Score Dashboard | AI Mental Health Tracker{% endblock %}

{% block content %}
<div class="honor-score-container">
    <!-- Decorative circles for design consistency -->
    <div class="decorative-circle circle-1"></div>
    <div class="decorative-circle circle-2"></div>
    <div class="decorative-circle circle-3"></div>
    <div class="decorative-circle circle-4"></div>
    <div class="decorative-circle circle-5"></div>
    
    <div class="container py-5">
        <!-- Header Section -->
        <div class="row mb-5">
            <div class="col-12 text-center">
                <h1 class="honor-title">Honor Score</h1>
                <p class="honor-subtitle">Track your focus achievements and build healthy digital habits</p>
            </div>
        </div>
        
        <!-- Main Honor Score Display -->
        <div class="row mb-5">
            <div class="col-md-6">
                <div class="honor-card main-score">
                    <h2>Your Honor Score</h2>
                    <div class="score-display">
                        <div class="score-circle">
                            <div class="score-value">85</div>
                            <svg viewBox="0 0 36 36" class="score-ring">
                                <path class="score-bg"
                                    d="M18 2.0845
                                    a 15.9155 15.9155 0 0 1 0 31.831
                                    a 15.9155 15.9155 0 0 1 0 -31.831" />
                                <path class="score-progress"
                                    stroke-dasharray="85, 100"
                                    d="M18 2.0845
                                    a 15.9155 15.9155 0 0 1 0 31.831
                                    a 15.9155 15.9155 0 0 1 0 -31.831" />
                            </svg>
                        </div>
                    </div>
                    <div class="score-description">
                        <p>You're in the <span class="highlight">top 15%</span> of focused users!</p>
                        <p class="score-details">Your score is based on focus session completion, app usage habits, and consistency.</p>
                    </div>
                    <div class="level-info">
                        <span class="level-badge">Level 8</span>
                        <span class="level-progress">15 points to next level</span>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="honor-card recent-activity">
                    <h2>Recent Activity</h2>
                    <div class="activity-list">
                        <div class="activity-item positive">
                            <div class="activity-icon">
                                <i class="bi bi-check-circle-fill"></i>
                            </div>
                            <div class="activity-details">
                                <span class="activity-title">Completed 45-min Focus Session</span>
                                <span class="activity-time">Today</span>
                            </div>
                            <div class="activity-points">+5</div>
                        </div>
                        <div class="activity-item positive">
                            <div class="activity-icon">
                                <i class="bi bi-calendar-check-fill"></i>
                            </div>
                            <div class="activity-details">
                                <span class="activity-title">3-Day Focus Streak</span>
                                <span class="activity-time">Today</span>
                            </div>
                            <div class="activity-points">+10</div>
                        </div>
                        <div class="activity-item negative">
                            <div class="activity-icon">
                                <i class="bi bi-x-circle-fill"></i>
                            </div>
                            <div class="activity-details">
                                <span class="activity-title">Cancelled Focus Session</span>
                                <span class="activity-time">Yesterday</span>
                            </div>
                            <div class="activity-points">-2</div>
                        </div>
                        <div class="activity-item positive">
                            <div class="activity-icon">
                                <i class="bi bi-list-check"></i>
                            </div>
                            <div class="activity-details">
                                <span class="activity-title">Completed All Tasks</span>
                                <span class="activity-time">Yesterday</span>
                            </div>
                            <div class="activity-points">+3</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Progress Section -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="honor-card achievements">
                    <h2>Achievements</h2>
                    <div class="achievement-grid">
                        <div class="achievement-item unlocked">
                            <div class="achievement-icon">
                                <i class="bi bi-hourglass-split"></i>
                            </div>
                            <div class="achievement-info">
                                <span class="achievement-name">Focus Novice</span>
                                <span class="achievement-desc">Complete 5 focus sessions</span>
                            </div>
                        </div>
                        <div class="achievement-item unlocked">
                            <div class="achievement-icon">
                                <i class="bi bi-lightning-charge"></i>
                            </div>
                            <div class="achievement-info">
                                <span class="achievement-name">Quick Starter</span>
                                <span class="achievement-desc">Start 3 focus sessions in a day</span>
                            </div>
                        </div>
                        <div class="achievement-item unlocked">
                            <div class="achievement-icon">
                                <i class="bi bi-calendar-week"></i>
                            </div>
                            <div class="achievement-info">
                                <span class="achievement-name">Week Warrior</span>
                                <span class="achievement-desc">Complete focus sessions 5 days in a row</span>
                            </div>
                        </div>
                        <div class="achievement-item">
                            <div class="achievement-icon">
                                <i class="bi bi-shield-lock"></i>
                            </div>
                            <div class="achievement-info">
                                <span class="achievement-name">Digital Defender</span>
                                <span class="achievement-desc">Block distractions for 10 sessions</span>
                            </div>
                        </div>
                        <div class="achievement-item">
                            <div class="achievement-icon">
                                <i class="bi bi-stopwatch"></i>
                            </div>
                            <div class="achievement-info">
                                <span class="achievement-name">Marathon Master</span>
                                <span class="achievement-desc">Complete a 60-minute focus session</span>
                            </div>
                        </div>
                        <div class="achievement-item">
                            <div class="achievement-icon">
                                <i class="bi bi-check-all"></i>
                            </div>
                            <div class="achievement-info">
                                <span class="achievement-name">Task Tackler</span>
                                <span class="achievement-desc">Complete 20 tasks during focus sessions</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Focus History Section -->
        <div class="row">
            <div class="col-md-7">
                <div class="honor-card focus-history">
                    <h2>Focus History</h2>
                    <div class="history-chart">
                        <div class="chart-wrapper">
                            <div class="day-label">Mon</div>
                            <div class="chart-bar">
                                <div class="bar-fill" style="height: 75%"></div>
                            </div>
                            <div class="time-label">75m</div>
                        </div>
                        <div class="chart-wrapper">
                            <div class="day-label">Tue</div>
                            <div class="chart-bar">
                                <div class="bar-fill" style="height: 90%"></div>
                            </div>
                            <div class="time-label">90m</div>
                        </div>
                        <div class="chart-wrapper">
                            <div class="day-label">Wed</div>
                            <div class="chart-bar">
                                <div class="bar-fill" style="height: 45%"></div>
                            </div>
                            <div class="time-label">45m</div>
                        </div>
                        <div class="chart-wrapper">
                            <div class="day-label">Thu</div>
                            <div class="chart-bar">
                                <div class="bar-fill" style="height: 60%"></div>
                            </div>
                            <div class="time-label">60m</div>
                        </div>
                        <div class="chart-wrapper">
                            <div class="day-label">Fri</div>
                            <div class="chart-bar">
                                <div class="bar-fill" style="height: 80%"></div>
                            </div>
                            <div class="time-label">80m</div>
                        </div>
                        <div class="chart-wrapper">
                            <div class="day-label">Sat</div>
                            <div class="chart-bar">
                                <div class="bar-fill" style="height: 30%"></div>
                            </div>
                            <div class="time-label">30m</div>
                        </div>
                        <div class="chart-wrapper">
                            <div class="day-label">Sun</div>
                            <div class="chart-bar">
                                <div class="bar-fill" style="height: 50%"></div>
                            </div>
                            <div class="time-label">50m</div>
                        </div>
                    </div>
                    <div class="chart-legend">
                        <div class="weekly-total">
                            <span class="legend-label">Weekly Total:</span>
                            <span class="legend-value">430 minutes</span>
                        </div>
                        <div class="weekly-average">
                            <span class="legend-label">Daily Average:</span>
                            <span class="legend-value">61 minutes</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-5">
                <div class="honor-card tips">
                    <h2>How to Earn Honor</h2>
                    <ul class="tips-list">
                        <li class="tip-item">
                            <i class="bi bi-check2-circle"></i>
                            <span>Complete focus sessions without interruptions</span>
                        </li>
                        <li class="tip-item">
                            <i class="bi bi-clock-history"></i>
                            <span>Maintain consistent daily focus routine</span>
                        </li>
                        <li class="tip-item">
                            <i class="bi bi-list-task"></i>
                            <span>Complete tasks during focus sessions</span>
                        </li>
                        <li class="tip-item">
                            <i class="bi bi-phone-fill"></i>
                            <span>Use app restriction during focus time</span>
                        </li>
                        <li class="tip-item">
                            <i class="bi bi-graph-up-arrow"></i>
                            <span>Increase focus duration gradually</span>
                        </li>
                        <li class="tip-item">
                            <i class="bi bi-award"></i>
                            <span>Unlock achievements and challenges</span>
                        </li>
                    </ul>
                    <div class="start-focus-container">
                        <a href="{{ url_for('focus_mode') }}" class="start-focus-btn">
                            <i class="bi bi-lightning-charge-fill me-2"></i>Start New Focus Session
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .honor-score-container {
        position: relative;
        min-height: 100vh;
        background: linear-gradient(135deg, #1e1e2e, #252540);
        color: #f8fafc;
        overflow: hidden;
    }
    
    /* Decorative circles */
    .decorative-circle {
        position: absolute;
        border-radius: 50%;
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
        animation: float 15s infinite ease-in-out;
    }
    
    .circle-1 {
        width: 300px;
        height: 300px;
        top: -100px;
        left: -100px;
        animation-delay: 0s;
    }
    
    .circle-2 {
        width: 200px;
        height: 200px;
        top: 60%;
        right: -50px;
        animation-delay: -5s;
    }
    
    .circle-3 {
        width: 150px;
        height: 150px;
        bottom: 10%;
        left: 20%;
        animation-delay: -7s;
    }
    
    .circle-4 {
        width: 250px;
        height: 250px;
        top: 20%;
        right: 25%;
        animation-delay: -3s;
    }
    
    .circle-5 {
        width: 180px;
        height: 180px;
        bottom: 30%;
        right: 10%;
        animation-delay: -10s;
    }
    
    @keyframes float {
        0%, 100% {
            transform: translateY(0) rotate(0deg);
        }
        50% {
            transform: translateY(-20px) rotate(5deg);
        }
    }
    
    /* Header styles */
    .honor-title {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        background: linear-gradient(135deg, #3b82f6, #6366f1);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        position: relative;
        display: inline-block;
    }
    
    .honor-subtitle {
        font-size: 1.2rem;
        color: #cbd5e1;
        max-width: 600px;
        margin: 0 auto;
    }
    
    /* Card styles */
    .honor-card {
        background: linear-gradient(145deg, #212c4f, #1e254a);
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        height: 100%;
    }
    
    .honor-card h2 {
        font-size: 1.5rem;
        margin-bottom: 20px;
        color: #f1f5f9;
        position: relative;
        padding-bottom: 10px;
    }
    
    .honor-card h2:after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 50px;
        height: 3px;
        background: linear-gradient(90deg, #3b82f6, #6366f1);
        border-radius: 3px;
    }
    
    /* Main score styles */
    .score-display {
        display: flex;
        justify-content: center;
        margin: 30px 0;
    }
    
    .score-circle {
        position: relative;
        width: 200px;
        height: 200px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .score-value {
        font-size: 4rem;
        font-weight: 700;
        color: #f1f5f9;
        position: relative;
        z-index: 2;
    }
    
    .score-ring {
        width: 200px;
        height: 200px;
        position: absolute;
        top: 0;
        left: 0;
        transform: rotate(-90deg);
    }
    
    .score-bg {
        fill: none;
        stroke: rgba(99, 102, 241, 0.1);
        stroke-width: 3;
    }
    
    .score-progress {
        fill: none;
        stroke: url(#gradient);
        stroke-width: 3;
        stroke-linecap: round;
    }
    
    .score-description {
        text-align: center;
        margin-bottom: 20px;
    }
    
    .highlight {
        color: #3b82f6;
        font-weight: 600;
    }
    
    .score-details {
        font-size: 0.9rem;
        color: #94a3b8;
        margin-top: 5px;
    }
    
    .level-info {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
    }
    
    .level-badge {
        background: linear-gradient(135deg, #3b82f6, #6366f1);
        padding: 5px 15px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.9rem;
    }
    
    .level-progress {
        color: #94a3b8;
        font-size: 0.9rem;
    }
    
    /* Activity styles */
    .activity-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    
    .activity-item {
        display: flex;
        align-items: center;
        padding: 10px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 10px;
        transition: all 0.3s ease;
    }
    
    .activity-item:hover {
        background: rgba(255, 255, 255, 0.05);
        transform: translateX(5px);
    }
    
    .activity-icon {
        margin-right: 15px;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
    }
    
    .activity-item.positive .activity-icon {
        background: rgba(52, 211, 153, 0.1);
        color: #34d399;
    }
    
    .activity-item.negative .activity-icon {
        background: rgba(248, 113, 113, 0.1);
        color: #f87171;
    }
    
    .activity-details {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }
    
    .activity-title {
        font-weight: 500;
    }
    
    .activity-time {
        font-size: 0.8rem;
        color: #94a3b8;
    }
    
    .activity-points {
        font-weight: 700;
    }
    
    .activity-item.positive .activity-points {
        color: #34d399;
    }
    
    .activity-item.negative .activity-points {
        color: #f87171;
    }
    
    /* Achievements styles */
    .achievement-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 20px;
    }
    
    .achievement-item {
        display: flex;
        align-items: center;
        padding: 15px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 10px;
        transition: all 0.3s ease;
        opacity: 0.5;
    }
    
    .achievement-item.unlocked {
        opacity: 1;
        background: rgba(99, 102, 241, 0.1);
    }
    
    .achievement-icon {
        margin-right: 15px;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.05);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
    }
    
    .achievement-item.unlocked .achievement-icon {
        background: linear-gradient(135deg, #3b82f6, #6366f1);
        color: white;
    }
    
    .achievement-info {
        display: flex;
        flex-direction: column;
    }
    
    .achievement-name {
        font-weight: 600;
    }
    
    .achievement-desc {
        font-size: 0.8rem;
        color: #94a3b8;
    }
    
    /* History chart styles */
    .history-chart {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        height: 200px;
        margin: 30px 0 15px;
    }
    
    .chart-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
    }
    
    .day-label {
        font-size: 0.8rem;
        color: #94a3b8;
        margin-bottom: 10px;
    }
    
    .chart-bar {
        width: 30px;
        height: 150px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 5px;
        overflow: hidden;
        position: relative;
    }
    
    .bar-fill {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        background: linear-gradient(180deg, #3b82f6, #6366f1);
        border-radius: 5px;
        transition: height 0.5s ease;
    }
    
    .time-label {
        font-size: 0.8rem;
        color: #94a3b8;
        margin-top: 10px;
    }
    
    .chart-legend {
        display: flex;
        justify-content: space-around;
        margin-top: 20px;
    }
    
    .weekly-total, .weekly-average {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    
    .legend-label {
        font-size: 0.9rem;
        color: #94a3b8;
    }
    
    .legend-value {
        font-size: 1.2rem;
        font-weight: 600;
        color: #f1f5f9;
    }
    
    /* Tips styles */
    .tips-list {
        list-style: none;
        padding: 0;
        margin: 0 0 30px;
    }
    
    .tip-item {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
    }
    
    .tip-item i {
        margin-right: 15px;
        color: #3b82f6;
        font-size: 1.2rem;
    }
    
    .start-focus-container {
        text-align: center;
        margin-top: 30px;
    }
    
    .start-focus-btn {
        display: inline-block;
        padding: 12px 24px;
        background: linear-gradient(135deg, #3b82f6, #6366f1);
        border-radius: 30px;
        color: white;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    
    .start-focus-btn:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
        color: white;
    }
</style>

<!-- SVG Gradient Definitions for the score circle -->
<svg width="0" height="0" style="position: absolute;">
    <defs>
        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#3b82f6" />
            <stop offset="100%" stop-color="#6366f1" />
        </linearGradient>
    </defs>
</svg>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Animate the score on page load
        setTimeout(() => {
            const scoreProgress = document.querySelector('.score-progress');
            scoreProgress.style.transition = 'stroke-dasharray 1.5s ease';
            scoreProgress.setAttribute('stroke-dasharray', '85, 100');
        }, 300);
        
        // Animate the bar charts
        const barFills = document.querySelectorAll('.bar-fill');
        setTimeout(() => {
            barFills.forEach(bar => {
                const targetHeight = bar.style.height;
                bar.style.height = '0%';
                
                setTimeout(() => {
                    bar.style.height = targetHeight;
                }, 100);
            });
        }, 600);
    });
</script>
{% endblock %}
